"use strict";exports.id=8210,exports.ids=[8210],exports.modules={15686:(a,b,c)=>{c.d(b,{y:()=>e});var d=c(93283);let e=(0,d.J1)`
  query GetChannels {
    channels {
      id
      name
      slug
      isActive
      warehouses {
        id
        name
        slug
        email
        isPrivate
        address {
          streetAddress1
          streetAddress2
          city
        phone
          postalCode
          countryArea
          country {
            code
            country
          }
        }
        privateMetadata {
          key
          value
        }
      }
    }
  }
`},30468:(a,b,c)=>{c.d(b,{A:()=>h});var d=c(13486),e=c(2500);let f=(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",focusable:"false",children:[(0,d.jsxs)("g",{clipPath:"url(#clip0_1262_29632)",children:[(0,d.jsx)("path",{d:"M12.5 3.5L3.5 12.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{d:"M12.5 12.5L3.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,d.jsx)("defs",{children:(0,d.jsx)("clipPath",{id:"clip0_1262_29632",children:(0,d.jsx)("rect",{width:16,height:16,fill:"white"})})})]});var g=c(60159);let h=({children:a,isModalOpen:b,onClose:c,className:h,removeCrossIcon:i,removeBgClose:j=!1,heading:k})=>{let l=(0,g.useRef)(null),m=(0,g.useRef)(null),n=(0,g.useId)(),o=(0,g.useCallback)(a=>{"Escape"!==a.key||j||c()},[c,j]),p=(0,g.useCallback)(a=>{if("Tab"!==a.key||!l.current)return;let b=l.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),c=b[0],d=b[b.length-1];a.shiftKey&&document.activeElement===c?(a.preventDefault(),d?.focus()):a.shiftKey||document.activeElement!==d||(a.preventDefault(),c?.focus())},[]);return(0,g.useEffect)(()=>(b?(m.current=document.activeElement,document.body.style.overflow="hidden",document.addEventListener("keydown",o),document.addEventListener("keydown",p),requestAnimationFrame(()=>{let a=l.current?.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');a&&a.length>0?a[0].focus():l.current?.focus()})):(document.body.style.overflow="auto",document.removeEventListener("keydown",o),document.removeEventListener("keydown",p),m.current&&m.current.focus()),()=>{document.removeEventListener("keydown",o),document.removeEventListener("keydown",p)}),[b,o,p]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:(0,e.cn)("",b?"fixed left-0 top-0 h-full w-full z-[100]":""),children:[b&&(0,d.jsx)("div",{onClick:()=>{j||c()},"aria-hidden":"true",className:"bg-black/60 w-full h-full absolute top-0 z-[110]"}),(0,d.jsxs)("div",{ref:l,role:"dialog","aria-modal":"true","aria-labelledby":k?n:void 0,tabIndex:-1,className:(0,e.cn)("fixed bottom-0 overflow-y-auto lg:inset-0 h-[calc(100dvh-8rem)] m-auto w-full lg:h-fit z-[120] bg-white lg:max-w-5xl px-4 py-6 md:px-6 lg:p-10 transition-all duration-[400ms] ease-in-out",b?"translate-y-0 opacity-100":"translate-y-full opacity-0 pointer-events-none",h),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between w-full",children:[k&&(0,d.jsx)("h2",{id:n,className:"font-semibold text-[var(--color-secondary-800)] font-secondary text-xl",children:k}),!i&&(0,d.jsx)("button",{onClick:c,"aria-label":"Close modal",className:"text-black absolute top-5 right-5 [&>svg]:size-4 size-6 p-1 rounded-full bg-[var(--color-secondary-200)] hover:bg-[var(--color-secondary-400)]/20 cursor-pointer",children:f})]}),a]})]})})}},98210:(a,b,c)=>{c.r(b),c.d(b,{default:()=>m});var d=c(13486),e=c(60159),f=c(4308),g=c(15686),h=c(40);function i(a,b,c,d){let e=(c-a)*Math.PI/180,f=(d-b)*Math.PI/180,g=Math.sin(e/2)*Math.sin(e/2)+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);return 2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))*3959}var j=c(31992),k=c(30468),l=c(10716);function m({isShipToDealer:a,onShippingTypeChange:b,selectedDealer:c,onDealerSelect:m}){let{sortedDealers:n,nearestDealer:o,userLocation:p,loading:q,locationError:r,isGettingLocation:s,requestUserLocation:t}=function(){let{getDealerLocatorToken:a}=(0,h.h)(),[b,c]=(0,e.useState)(null),[d,j]=(0,e.useState)(null),[k,l]=(0,e.useState)(!1),m=a(),{data:n,loading:o,error:p}=(0,f.IT)(g.y,{context:{headers:{...m&&{"Authorization-Bearer":m}}}}),q=(0,e.useMemo)(()=>{if(!n?.channels)return[];let a=n.channels.find(a=>"dealers"===a.slug);return a?a.warehouses.map(a=>{let c={...a,distance:"N/A",phone:a?.address?.phone||"",website:"",latitude:"",longitude:"",hours:"",comments:"",pocFirstName:"",pocLastName:"",state:""};if(a.privateMetadata?.forEach(a=>{switch(a.key){case"lat":c.latitude=a.value;break;case"lng":c.longitude=a.value;break;case"url":c.website=a.value;break;case"hours":c.hours=a.value;break;case"comments":c.comments=a.value;break;case"poc_firstname":c.pocFirstName=a.value;break;case"poc_lastname":c.pocLastName=a.value;break;case"state":c.state=a.value}}),b&&c.latitude&&c.longitude&&"null"!==c.latitude&&"null"!==c.longitude){let a=parseFloat(c.latitude),d=parseFloat(c.longitude);if(!isNaN(a)&&!isNaN(d)){let e=i(b.lat,b.lng,a,d);c.distance=`${e.toFixed(1)} miles`}}return c}):[]},[n,b]),r=(0,e.useMemo)(()=>b?[...q].sort((a,b)=>(a.distance&&"N/A"!==a.distance?parseFloat(a.distance.split(" ")[0]):1/0)-(b.distance&&"N/A"!==b.distance?parseFloat(b.distance.split(" ")[0]):1/0)):q,[q,b]),s=(0,e.useMemo)(()=>b&&0!==r.length?r.find(a=>a.distance&&"N/A"!==a.distance)||r[0]:null,[r,b]),t=(0,e.useCallback)(()=>navigator.geolocation?(l(!0),j(null),new Promise((a,b)=>{navigator.geolocation.getCurrentPosition(b=>{let d={lat:b.coords.latitude,lng:b.coords.longitude};c(d),j(null),l(!1),a(d)},a=>{let c="Unable to get your location.";switch(a.code){case a.PERMISSION_DENIED:c="Location access denied. Please enable location access and try again.";break;case a.POSITION_UNAVAILABLE:c="Location information is unavailable.";break;case a.TIMEOUT:c="Location request timed out."}j(c),l(!1),b(Error(c))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})):(j("Geolocation is not supported by this browser."),Promise.reject(Error("Geolocation not supported"))),[]),u=(0,e.useCallback)(a=>b?r.filter(b=>!!b.distance&&"N/A"!==b.distance&&parseFloat(b.distance.split(" ")[0])<=a):[],[r,b]);return{dealerWarehouses:q,sortedDealers:r,nearestDealer:s,userLocation:b,loading:o,error:p,locationError:d,isGettingLocation:k,requestUserLocation:t,setUserLocation:c,findDealersWithinRadius:u,calculateDistance:(a,b,c,d)=>i(a,b,c,d)}}(),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)(""),[y,z]=(0,e.useState)(!1),A=n.filter(a=>a.name.toLowerCase().includes(w.toLowerCase())||a.address?.city?.toLowerCase().includes(w.toLowerCase())||a.address?.streetAddress1?.toLowerCase().includes(w.toLowerCase())),B=async a=>{if(b(a),a){if(v(!0),!y&&!p){z(!0);try{await t()}catch{console.log("Location access declined, showing manual selection")}}}else v(!1),m(null)};return(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-base font-semibold font-secondary text-[var(--color-secondary-800)] mb-3 uppercase",children:"Shipping Options"}),(0,d.jsxs)("div",{className:"grid-cols-2 grid gap-2",children:[(0,d.jsxs)("label",{className:`flex items-start gap-3 ring-1 p-2 cursor-pointer ${!a?"ring-[var(--color-primary-100)] bg-[var(--color-primary-50)] text-[var(--color-primary-700)]":"ring-gray-300 hover:bg-gray-50"}`,children:[(0,d.jsx)("input",{type:"radio",name:"shippingType",checked:!a,onChange:()=>B(!1),className:"mt-1 accent-[var(--color-primary-600)]"}),(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsx)("div",{className:"font-medium text-base font-secondary",children:"Ship to My Address"})})]}),(0,d.jsxs)("label",{className:`flex items-start gap-3 ring-1 p-2 cursor-pointer ${a?"ring-[var(--color-primary-100)] bg-[var(--color-primary-50)] text-[var(--color-primary-700)]":"ring-gray-300 hover:bg-gray-50"}`,children:[(0,d.jsx)("input",{type:"radio",name:"shippingType",checked:a,onChange:()=>B(!0),className:"mt-1 accent-[var(--color-primary-600)]"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"font-medium text-base font-secondary",children:"Ship to Dealer"}),a&&c&&(0,d.jsxs)("div",{className:"mt-3 p-3 bg-white rounded border border-[var(--color-secondary-200)]",children:[(0,d.jsx)("div",{className:"font-medium text-sm",children:c.name}),(0,d.jsxs)("div",{className:"text-sm text-[var(--color-secondary-600)]",children:[c.address.streetAddress1,(0,d.jsx)("br",{}),c.address.city,", ",c.address.country?.code," ",c.address.postalCode]}),c.distance&&"N/A"!==c.distance&&(0,d.jsxs)("div",{className:"text-sm text-green-600 font-medium mt-1",children:["Distance: ",c.distance]}),c.phone&&(0,d.jsxs)("div",{className:"text-sm text-[var(--color-secondary-600)]",children:["Phone: ",c.phone]}),(0,d.jsx)("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-[var(--color-primary-600)] hover:text-[var(--color-primary-700)] mt-2 underline",children:"Change Dealer"})]}),a&&!c&&(0,d.jsxs)("div",{className:"mt-3 p-3 bg-white rounded border border-[var(--color-secondary-200)]",children:[(0,d.jsx)("div",{className:"text-sm text-[var(--color-secondary-600)] mb-2",children:"Please select a dealer for pickup"}),(0,d.jsx)("button",{type:"button",onClick:()=>v(!0),className:"text-sm bg-[var(--color-primary-600)] text-white px-3 py-1 rounded hover:bg-[var(--color-primary-700)]",children:"Select Dealer"})]})]})]})]}),(0,d.jsx)(k.A,{isModalOpen:u,onClose:()=>v(!1),heading:"Select a Dealer",className:"lg:max-w-4xl",children:(0,d.jsxs)("div",{className:"mt-10 space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[!p&&!r&&(0,d.jsx)("div",{className:"p-2 bg-[var(--color-secondary-100)] border border-[var(--color-secondary-200)] rounded",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium text-[var(--color-secondary-800)] font-secondary",children:"Enable location for distance calculations"}),(0,d.jsx)("div",{className:"text-sm text-[var(--color-secondary-600)] mt-1",children:"We'll show dealers nearest to you first"})]}),(0,d.jsx)(l.A,{variant:"primary",content:s?"Getting...":"Allow Location",onClick:t,disabled:s,className:"text-sm py-2 px-4"})]})}),r&&(0,d.jsxs)("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded",children:[(0,d.jsx)("div",{className:"text-sm text-yellow-800 font-secondary font-medium",children:r}),(0,d.jsx)("div",{className:"text-sm text-yellow-600 mt-1",children:"You can still browse all dealers below"})]}),p&&(0,d.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:(0,d.jsx)("div",{className:"text-sm text-green-800 font-secondary font-medium",children:"âœ“ Using your location - dealers are sorted by distance"})})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-[var(--color-secondary-800)] pb-2 uppercase font-secondary",children:"Search Dealers"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("input",{type:"text",placeholder:"Search by dealer name, city, or address...",value:w,onChange:a=>x(a.target.value),className:"w-full h-12 pl-10 pr-4 text-sm border border-[var(--color-secondary-200)] bg-white rounded focus:outline-none focus:ring-2 focus:ring-[var(--color-primary-500)] focus:border-[var(--color-primary-600)] font-secondary"}),(0,d.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:(0,d.jsx)("span",{className:"w-4 h-4 block text-[var(--color-secondary-600)]",children:j.W})})]})]}),(0,d.jsxs)("div",{className:"border border-[var(--color-secondary-200)] rounded bg-white",children:[q&&(0,d.jsxs)("div",{className:"p-8 text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary-600)] mx-auto"}),(0,d.jsx)("div",{className:"mt-2 text-sm text-[var(--color-secondary-600)] font-secondary",children:"Loading dealers..."})]}),!q&&0===A.length&&(0,d.jsx)("div",{className:"p-8 text-center",children:(0,d.jsx)("div",{className:"text-sm text-[var(--color-secondary-600)] font-secondary",children:w?`No dealers found matching "${w}"`:"No dealers available"})}),!q&&A.length>0&&(0,d.jsx)("div",{className:"max-h-96 overflow-y-auto",children:A.map((a,b)=>(0,d.jsx)("div",{className:`p-2 hover:bg-[var(--color-secondary-50)] cursor-pointer transition-colors ${b!==A.length-1?"border-b border-[var(--color-secondary-200)]":""}`,onClick:()=>{m({id:a.id,name:a.name,address:a.address||{},phone:a.phone,distance:a.distance,hours:a.hours,comments:a.comments,state:a.state}),v(!1)},children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:"font-medium text-sm text-[var(--color-secondary-900)] font-secondary",children:a.name}),(0,d.jsxs)("div",{className:"text-sm text-[var(--color-secondary-600)] mt-1",children:[a.address?.streetAddress1,(0,d.jsx)("br",{}),a.address?.city,", ",a.state||a.address?.country?.code," ",a.address?.postalCode]}),a.phone&&(0,d.jsxs)("div",{className:"text-sm text-[var(--color-secondary-600)] mt-1",children:[(0,d.jsx)("span",{className:"font-medium",children:"Phone:"})," ",a.phone]}),a.hours&&(0,d.jsxs)("div",{className:"text-sm text-[var(--color-secondary-600)]",children:[(0,d.jsx)("span",{className:"font-medium",children:"Hours:"})," ",a.hours]})]}),(0,d.jsxs)("div",{className:"ml-4 text-right flex flex-col items-end gap-2",children:[a.distance&&"N/A"!==a.distance&&(0,d.jsx)("div",{className:"text-sm font-medium text-green-600 font-secondary",children:a.distance}),(0,d.jsx)(l.A,{variant:"primary",content:"Select",className:"text-xs py-1 px-3"})]})]})},a.id))})]}),(0,d.jsx)("div",{className:"flex flex-col gap-2 pt-4",children:(0,d.jsx)(l.A,{variant:"secondary",content:"Cancel",onClick:()=>v(!1),className:"w-full text-sm md:text-base py-2.5 md:py-3"})})]})})]})}}};