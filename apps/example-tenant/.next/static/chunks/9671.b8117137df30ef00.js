"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9671],{9671:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(54568),r=t(7620),n=t(2244),o=t(73964),l=t(78604);function c(e,s,t,a){let r=(t-e)*Math.PI/180,n=(a-s)*Math.PI/180,o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(t*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*3959}var i=t(26684),d=t(93121),u=t(75188);function m(e){var s;let{isShipToDealer:t,onShippingTypeChange:m,selectedDealer:h,onDealerSelect:x}=e,{sortedDealers:v,nearestDealer:p,userLocation:y,loading:f,locationError:b,isGettingLocation:g,requestUserLocation:j}=function(){let{getDealerLocatorToken:e}=(0,l.h)(),[s,t]=(0,r.useState)(null),[a,i]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1),m=e(),{data:h,loading:x,error:v}=(0,n.IT)(o.y,{context:{headers:{...m&&{"Authorization-Bearer":m}}}}),p=(0,r.useMemo)(()=>{if(!(null==h?void 0:h.channels))return[];let e=h.channels.find(e=>"dealers"===e.slug);return e?e.warehouses.map(e=>{var t,a;let r={...e,distance:"N/A",phone:(null==e||null==(t=e.address)?void 0:t.phone)||"",website:"",latitude:"",longitude:"",hours:"",comments:"",pocFirstName:"",pocLastName:"",state:""};if(null==(a=e.privateMetadata)||a.forEach(e=>{switch(e.key){case"lat":r.latitude=e.value;break;case"lng":r.longitude=e.value;break;case"url":r.website=e.value;break;case"hours":r.hours=e.value;break;case"comments":r.comments=e.value;break;case"poc_firstname":r.pocFirstName=e.value;break;case"poc_lastname":r.pocLastName=e.value;break;case"state":r.state=e.value}}),s&&r.latitude&&r.longitude&&"null"!==r.latitude&&"null"!==r.longitude){let e=parseFloat(r.latitude),t=parseFloat(r.longitude);if(!isNaN(e)&&!isNaN(t)){let a=c(s.lat,s.lng,e,t);r.distance="".concat(a.toFixed(1)," miles")}}return r}):[]},[h,s]),y=(0,r.useMemo)(()=>s?[...p].sort((e,s)=>(e.distance&&"N/A"!==e.distance?parseFloat(e.distance.split(" ")[0]):1/0)-(s.distance&&"N/A"!==s.distance?parseFloat(s.distance.split(" ")[0]):1/0)):p,[p,s]),f=(0,r.useMemo)(()=>s&&0!==y.length?y.find(e=>e.distance&&"N/A"!==e.distance)||y[0]:null,[y,s]),b=(0,r.useCallback)(()=>navigator.geolocation?(u(!0),i(null),new Promise((e,s)=>{navigator.geolocation.getCurrentPosition(s=>{let a={lat:s.coords.latitude,lng:s.coords.longitude};t(a),i(null),u(!1),e(a)},e=>{let t="Unable to get your location.";switch(e.code){case e.PERMISSION_DENIED:t="Location access denied. Please enable location access and try again.";break;case e.POSITION_UNAVAILABLE:t="Location information is unavailable.";break;case e.TIMEOUT:t="Location request timed out."}i(t),u(!1),s(Error(t))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})):(i("Geolocation is not supported by this browser."),Promise.reject(Error("Geolocation not supported"))),[]),g=(0,r.useCallback)(e=>s?y.filter(s=>!!s.distance&&"N/A"!==s.distance&&parseFloat(s.distance.split(" ")[0])<=e):[],[y,s]);return{dealerWarehouses:p,sortedDealers:y,nearestDealer:f,userLocation:s,loading:x,error:v,locationError:a,isGettingLocation:d,requestUserLocation:b,setUserLocation:t,findDealersWithinRadius:g,calculateDistance:(e,s,t,a)=>c(e,s,t,a)}}(),[N,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(""),[L,A]=(0,r.useState)(!1),M=v.filter(e=>{var s,t,a,r;return e.name.toLowerCase().includes(k.toLowerCase())||(null==(t=e.address)||null==(s=t.city)?void 0:s.toLowerCase().includes(k.toLowerCase()))||(null==(r=e.address)||null==(a=r.streetAddress1)?void 0:a.toLowerCase().includes(k.toLowerCase()))}),E=async e=>{if(m(e),e){if(w(!0),!L&&!y){A(!0);try{await j()}catch(e){console.log("Location access declined, showing manual selection")}}}else w(!1),x(null)};return(0,r.useEffect)(()=>{t&&p&&!h&&y&&x({id:p.id,name:p.name,address:p.address||{},phone:p.phone,distance:p.distance,hours:p.hours,comments:p.comments,state:p.state})},[t,p,h,y,x]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-base font-semibold font-secondary text-[var(--color-secondary-800)] mb-3 uppercase",children:"Shipping Options"}),(0,a.jsxs)("div",{className:"grid-cols-2 grid gap-2",children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 ring-1 p-2 cursor-pointer ".concat(t?"ring-gray-300 hover:bg-gray-50":"ring-[var(--color-primary-100)] bg-[var(--color-primary-50)] text-[var(--color-primary-700)]"),children:[(0,a.jsx)("input",{type:"radio",name:"shippingType",checked:!t,onChange:()=>E(!1),className:"mt-1 accent-[var(--color-primary-600)]"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"font-medium text-base font-secondary",children:"Ship to My Address"})})]}),(0,a.jsxs)("label",{className:"flex items-start gap-3 ring-1 p-2 cursor-pointer ".concat(t?"ring-[var(--color-primary-100)] bg-[var(--color-primary-50)] text-[var(--color-primary-700)]":"ring-gray-300 hover:bg-gray-50"),children:[(0,a.jsx)("input",{type:"radio",name:"shippingType",checked:t,onChange:()=>E(!0),className:"mt-1 accent-[var(--color-primary-600)]"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-base font-secondary",children:"Ship to Dealer"}),t&&h&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-white rounded border border-[var(--color-secondary-200)]",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:h.name}),(0,a.jsxs)("div",{className:"text-sm text-[var(--color-secondary-600)]",children:[h.address.streetAddress1,(0,a.jsx)("br",{}),h.address.city,", ",null==(s=h.address.country)?void 0:s.code," ",h.address.postalCode]}),h.distance&&"N/A"!==h.distance&&(0,a.jsxs)("div",{className:"text-sm text-green-600 font-medium mt-1",children:["Distance: ",h.distance]}),h.phone&&(0,a.jsxs)("div",{className:"text-sm text-[var(--color-secondary-600)]",children:["Phone: ",h.phone]}),(0,a.jsx)("button",{type:"button",onClick:()=>w(!0),className:"text-sm text-[var(--color-primary-600)] hover:text-[var(--color-primary-700)] mt-2 underline",children:"Change Dealer"})]}),t&&!h&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-white rounded border border-[var(--color-secondary-200)]",children:[(0,a.jsx)("div",{className:"text-sm text-[var(--color-secondary-600)] mb-2",children:"Please select a dealer for pickup"}),(0,a.jsx)("button",{type:"button",onClick:()=>w(!0),className:"text-sm bg-[var(--color-primary-600)] text-white px-3 py-1 rounded hover:bg-[var(--color-primary-700)]",children:"Select Dealer"})]})]})]})]}),(0,a.jsx)(d.A,{isModalOpen:N,onClose:()=>w(!1),heading:"Select a Dealer",className:"lg:max-w-4xl",children:(0,a.jsxs)("div",{className:"mt-10 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[!y&&!b&&(0,a.jsx)("div",{className:"p-2 bg-[var(--color-secondary-100)] border border-[var(--color-secondary-200)] rounded",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-[var(--color-secondary-800)] font-secondary",children:"Enable location for distance calculations"}),(0,a.jsx)("div",{className:"text-sm text-[var(--color-secondary-600)] mt-1",children:"We'll show dealers nearest to you first"})]}),(0,a.jsx)(u.A,{variant:"primary",content:g?"Getting...":"Allow Location",onClick:j,disabled:g,className:"text-sm py-2 px-4"})]})}),b&&(0,a.jsxs)("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded",children:[(0,a.jsx)("div",{className:"text-sm text-yellow-800 font-secondary font-medium",children:b}),(0,a.jsx)("div",{className:"text-sm text-yellow-600 mt-1",children:"You can still browse all dealers below"})]}),y&&(0,a.jsx)("div",{className:"p-2 bg-green-50 border border-green-200 rounded",children:(0,a.jsx)("div",{className:"text-sm text-green-800 font-secondary font-medium",children:"âœ“ Using your location - dealers are sorted by distance"})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--color-secondary-800)] pb-2 uppercase font-secondary",children:"Search Dealers"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by dealer name, city, or address...",value:k,onChange:e=>C(e.target.value),className:"w-full h-12 pl-10 pr-4 text-sm border border-[var(--color-secondary-200)] bg-white rounded focus:outline-none focus:ring-2 focus:ring-[var(--color-primary-500)] focus:border-[var(--color-primary-600)] font-secondary"}),(0,a.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:(0,a.jsx)("span",{className:"w-4 h-4 block text-[var(--color-secondary-600)]",children:i.W})})]})]}),(0,a.jsxs)("div",{className:"border border-[var(--color-secondary-200)] rounded bg-white",children:[f&&(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary-600)] mx-auto"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-[var(--color-secondary-600)] font-secondary",children:"Loading dealers..."})]}),!f&&0===M.length&&(0,a.jsx)("div",{className:"p-8 text-center",children:(0,a.jsx)("div",{className:"text-sm text-[var(--color-secondary-600)] font-secondary",children:k?'No dealers found matching "'.concat(k,'"'):"No dealers available"})}),!f&&M.length>0&&(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:M.map((e,s)=>{var t,r,n,o,l;return(0,a.jsx)("div",{className:"p-2 hover:bg-[var(--color-secondary-50)] cursor-pointer transition-colors ".concat(s!==M.length-1?"border-b border-[var(--color-secondary-200)]":""),onClick:()=>{x({id:e.id,name:e.name,address:e.address||{},phone:e.phone,distance:e.distance,hours:e.hours,comments:e.comments,state:e.state}),w(!1)},children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium text-sm text-[var(--color-secondary-900)] font-secondary",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-[var(--color-secondary-600)] mt-1",children:[null==(t=e.address)?void 0:t.streetAddress1,(0,a.jsx)("br",{}),null==(r=e.address)?void 0:r.city,", ",e.state||(null==(o=e.address)||null==(n=o.country)?void 0:n.code)," ",null==(l=e.address)?void 0:l.postalCode]}),e.phone&&(0,a.jsxs)("div",{className:"text-sm text-[var(--color-secondary-600)] mt-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Phone:"})," ",e.phone]}),e.hours&&(0,a.jsxs)("div",{className:"text-sm text-[var(--color-secondary-600)]",children:[(0,a.jsx)("span",{className:"font-medium",children:"Hours:"})," ",e.hours]})]}),(0,a.jsxs)("div",{className:"ml-4 text-right flex flex-col items-end gap-2",children:[e.distance&&"N/A"!==e.distance&&(0,a.jsx)("div",{className:"text-sm font-medium text-green-600 font-secondary",children:e.distance}),(0,a.jsx)(u.A,{variant:"primary",content:"Select",className:"text-xs py-1 px-3"})]})]})},e.id)})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2 pt-4",children:(0,a.jsx)(u.A,{variant:"secondary",content:"Cancel",onClick:()=>w(!1),className:"w-full text-sm md:text-base py-2.5 md:py-3"})})]})})]})}},26684:(e,s,t)=>{t.d(s,{W:()=>r});var a=t(54568);let r=(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 20 20",fill:"none","aria-hidden":"true",focusable:"false",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_476_23728)",children:[(0,a.jsx)("path",{d:"M8.75 15C12.2018 15 15 12.2018 15 8.75C15 5.29822 12.2018 2.5 8.75 2.5C5.29822 2.5 2.5 5.29822 2.5 8.75C2.5 12.2018 5.29822 15 8.75 15Z",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M13.1696 13.1696L17.5 17.5",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_476_23728",children:(0,a.jsx)("rect",{width:20,height:20,fill:"white"})})})]})},73964:(e,s,t)=>{t.d(s,{y:()=>n});var a=t(46590);function r(){let e=(0,a._)(["\n  query GetChannels {\n    channels {\n      id\n      name\n      slug\n      isActive\n      warehouses {\n        id\n        name\n        slug\n        email\n        isPrivate\n        address {\n          streetAddress1\n          streetAddress2\n          city\n        phone\n          postalCode\n          countryArea\n          country {\n            code\n            country\n          }\n        }\n        privateMetadata {\n          key\n          value\n        }\n      }\n    }\n  }\n"]);return r=function(){return e},e}let n=(0,t(26177).J1)(r())},93121:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(54568),r=t(53706);let n=(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none","aria-hidden":"true",focusable:"false",children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_1262_29632)",children:[(0,a.jsx)("path",{d:"M12.5 3.5L3.5 12.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M12.5 12.5L3.5 3.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_1262_29632",children:(0,a.jsx)("rect",{width:16,height:16,fill:"white"})})})]});var o=t(7620);let l=e=>{let{children:s,isModalOpen:t,onClose:l,className:c,removeCrossIcon:i,removeBgClose:d=!1,heading:u}=e,m=(0,o.useRef)(null),h=(0,o.useRef)(null),x=(0,o.useId)(),v=(0,o.useCallback)(e=>{"Escape"!==e.key||d||l()},[l,d]),p=(0,o.useCallback)(e=>{if("Tab"!==e.key||!m.current)return;let s=m.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),t=s[0],a=s[s.length-1];e.shiftKey&&document.activeElement===t?(e.preventDefault(),null==a||a.focus()):e.shiftKey||document.activeElement!==a||(e.preventDefault(),null==t||t.focus())},[]);return(0,o.useEffect)(()=>(t?(h.current=document.activeElement,document.body.style.overflow="hidden",document.addEventListener("keydown",v),document.addEventListener("keydown",p),requestAnimationFrame(()=>{var e,s;let t=null==(e=m.current)?void 0:e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t&&t.length>0?t[0].focus():null==(s=m.current)||s.focus()})):(document.body.style.overflow="auto",document.removeEventListener("keydown",v),document.removeEventListener("keydown",p),h.current&&h.current.focus()),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keydown",p)}),[t,v,p]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:(0,r.cn)("",t?"fixed left-0 top-0 h-full w-full z-[100]":""),children:[t&&(0,a.jsx)("div",{onClick:()=>{d||l()},"aria-hidden":"true",className:"bg-black/60 w-full h-full absolute top-0 z-[110]"}),(0,a.jsxs)("div",{ref:m,role:"dialog","aria-modal":"true","aria-labelledby":u?x:void 0,tabIndex:-1,className:(0,r.cn)("fixed bottom-0 overflow-y-auto lg:inset-0 h-[calc(100dvh-8rem)] m-auto w-full lg:h-fit z-[120] bg-white lg:max-w-5xl px-4 py-6 md:px-6 lg:p-10 transition-all duration-[400ms] ease-in-out",t?"translate-y-0 opacity-100":"translate-y-full opacity-0 pointer-events-none",c),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[u&&(0,a.jsx)("h2",{id:x,className:"font-semibold text-[var(--color-secondary-800)] font-secondary text-xl",children:u}),!i&&(0,a.jsx)("button",{onClick:l,"aria-label":"Close modal",className:"text-black absolute top-5 right-5 [&>svg]:size-4 size-6 p-1 rounded-full bg-[var(--color-secondary-200)] hover:bg-[var(--color-secondary-400)]/20 cursor-pointer",children:n})]}),s]})]})})}}}]);