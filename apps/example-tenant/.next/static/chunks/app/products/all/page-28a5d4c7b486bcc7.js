(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5267],{6134:(e,a,t)=>{Promise.resolve().then(t.bind(t,37686))},37686:(e,a,t)=>{"use strict";t.d(a,{default:()=>S});var s=t(54568),r=t(51918),n=t(71816),l=t(61584),o=t(53706),c=t(62942),i=t(7620),d=t(66180),p=t.n(d),u=t(78136),m=t(96538),g=t(14041),x=t(59732),h=t(33932);let v=[{text:"HOME",link:"/"},{text:"Product"}];var y=t(32064),f=t(39452),b=t(7155),j=t(33288),N=t(895),C=t(21556),_=t(70737),w=t(24338);function k(e){let{initialData:a}=e,t=(0,c.useSearchParams)(),d=(0,c.useRouter)(),k=(0,c.usePathname)(),S=(0,i.useRef)(null),P=(null==t?void 0:t.get("fitment_pairs"))||"",L=(null==t?void 0:t.get("q"))||"",[E,A]=(0,i.useState)(18),[R,I]=(0,i.useState)([]),[z,M]=(0,i.useState)([]),[T,O]=(0,i.useState)(1),[U,D]=(0,i.useState)(!a),[B,K]=(0,i.useState)(a),[q,F]=(0,i.useState)("grid"),[G,H]=(0,i.useState)("name_asc"),[X,Z]=(0,i.useState)(!1),[J]=(0,i.useState)(!!a),Q=(0,i.useMemo)(()=>{let e=a=>{let t=[];return a.forEach(a=>{t.push([a.slug,a.id]),a.children&&t.push(...e(a.children))}),t};return new Map((null==B?void 0:B.facets.categories)?e(B.facets.categories):[])},[null==B?void 0:B.facets.categories]),V=(0,i.useMemo)(()=>new Map((null==B?void 0:B.facets.brands.map(e=>[e.value.toLowerCase().replace(/\s+/g,"-"),e.id]))||[]),[null==B?void 0:B.facets.brands]),W=(0,i.useCallback)((e,a,t,s)=>{let r=new URLSearchParams;P&&r.set("fitment_pairs",P),L&&r.set("q",L),e.length>0&&e.forEach(e=>{r.append("category",e)}),a.length>0&&a.forEach(e=>{r.append("brand",e)}),"name_asc"!==t&&r.set("sort",t),s>1&&r.set("page",s.toString());let n=r.toString(),l=n?"".concat(k,"?").concat(n):k;d.replace(l,{scroll:!1})},[k,d,P,t]),Y=(0,i.useCallback)(()=>{let e=t.getAll("categories"),a=t.getAll("productTypes"),s=t.get("sort"),r=t.get("page");return{categories:e,brands:a,sortKey:s||"name_asc",page:r?parseInt(r,10):1}},[t]);(0,i.useEffect)(()=>{if(!X){let e=Y();I(e.categories),M(e.brands),H(e.sortKey),O(e.page),Z(!0)}},[X,Y]),(0,i.useEffect)(()=>{X&&W(R,z,G,T)},[X,R,z,G,T,W]);let $=(0,i.useRef)(J);(0,i.useEffect)(()=>{if($.current){$.current=!1;return}(async()=>{D(!0);try{let e=new URLSearchParams({page:String(T),per_page:String(E)});L&&e.set("q",L),P&&e.set("fitment_pairs",P),R.length>0&&Q.size>0&&R.forEach(a=>{e.append("category_slug",a)}),z.length>0&&V.size>0&&z.forEach(a=>{e.append("brand_slug",a)}),G&&("name_asc"===G?console.log("Get all products"):e.set("sort_by",G));let a=w.env.NEXT_PUBLIC_PARTSLOGIC_URL,t=await fetch("".concat(a,"/api/search/products?").concat(e.toString()),{headers:{accept:"application/json"}});if(!t.ok)throw Error("Failed to fetch products");let s=await t.json();K(s)}catch(e){console.error("Error fetching products:",e)}finally{D(!1)}})()},[P,T,E,R,z,G,L]);let ee=(null==B?void 0:B.products.map(e=>{var a;return{node:{id:e.id,name:e.name,slug:e.slug,media:null==(a=e.media)?void 0:a.map(e=>({id:String(e.id),url:e.url,alt:e.alt||null})),category:e.category||null,price_min:e.price_min,price_max:e.price_max,pricing:{onSale:null,priceRange:{start:e.price_min||null,stop:e.price_max||null}}}}}))||[],ea=(0,i.useMemo)(()=>{let e=function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=[];return a.forEach(a=>{s.push({id:a.slug,name:"".concat("  ".repeat(t)).concat(a.value),slug:a.slug,products:{totalCount:a.count}}),a.children&&s.push(...e(a.children,t+1))}),s};return(null==B?void 0:B.facets.categories)?e(B.facets.categories):[]},[null==B?void 0:B.facets.categories]),et=(null==B?void 0:B.pagination.total_pages)||1;return(0,s.jsxs)("div",{ref:S,className:"container mx-auto min-h-[100dvh] py-12 px-4 md:px-6 md:py-16 lg:py-24 lg:px-0 relative",children:[(0,s.jsx)(_.A,{currentPage:T,totalPages:et,basePath:"/products/all"}),(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsx)(u.A,{items:v}),(0,s.jsx)(m.A,{className:"mt-5",content:"Products"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-3 lg:gap-1 w-full justify-end",children:[(0,s.jsx)(h.m,{sortOptions:[{key:"price_min:asc",label:"Price: Low to High"},{key:"price_max:desc",label:"Price: High to Low"}],sortKey:G,setSortKey:H}),(0,s.jsxs)("div",{className:"flex items-center justify-end w-full md:w-auto gap-1",children:[(0,s.jsx)(x.A,{categories:ea,productTypes:((null==B?void 0:B.facets.brands)||[]).map(e=>{let a=e.value.toLowerCase().replace(/\s+/g,"-");return{id:a,name:e.value,slug:a,products:{totalCount:e.count}}}),selectedCategoryIds:R,selectedProductTypeIds:z,onCategoryChange:I,onProductTypeChange:M,filtersLoading:U}),(0,s.jsxs)("div",{className:"ring-1 ring-[var(--color-secondary-100)] items-center transition-all ease-in-out duration-300 p-1 bg-[var(--color-secondary-100)]",children:[(0,s.jsx)("button",{type:"button",onClick:()=>F("list"),"aria-pressed":"list"===q,"aria-label":"List view",className:"p-2.5 transition-all ease-in-out duration-300 cursor-pointer ".concat("list"===q?"bg-white":"bg-transparent"),children:(0,s.jsx)("span",{className:"size-5 ".concat("list"===q?"text-[var(--color-primary-600)]":"text-[var(--color-secondary-600)]"),children:f.k})}),(0,s.jsx)("button",{type:"button",onClick:()=>F("grid"),"aria-pressed":"grid"===q,"aria-label":"Grid view",className:"p-2.5 transition-all ease-in-out duration-300 cursor-pointer ".concat("grid"===q?"bg-white":"bg-transparent"),children:(0,s.jsx)("span",{className:"size-5 ".concat("grid"===q?"text-[var(--color-primary-600)]":"text-[var(--color-secondary-600)]"),children:y.a})})]}),(0,s.jsx)(l.A,{value:E,onChange:A})]})]})]}),(0,s.jsx)("div",{className:"lg:hidden mt-6",children:(0,s.jsx)(C.a,{AddClearButton:!0,className:"!border !border-[var(--color-secondary-200)] !p-4 [&>h2]:!text-lg"})}),(0,s.jsxs)("div",{className:"mt-10 flex gap-8",children:[(0,s.jsx)("aside",{className:"hidden lg:block w-80 flex-shrink-0",children:(0,s.jsx)("div",{className:"sticky top-32 space-y-6",children:B&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.a,{AddClearButton:!0,className:" !border !border-[var(--color-secondary-200)] !p-4 [&>h2]:!text-lg"}),(0,s.jsx)(n.A,{categories:B.facets.categories,selectedCategories:R,onCategoriesChange:I}),(0,s.jsx)(j.e,{title:"Brands",defaultOpen:!0,children:(0,s.jsxs)("div",{className:"space-y-3 px-1 overflow-y-auto max-h-80",children:[z.length>0&&(0,s.jsx)("button",{type:"button",onClick:()=>{(0,N.I)(),M([])},className:"text-sm text-[var(--color-primary-600)] hover:text-[var(--color-primary-700)] font-secondary",children:"Clear all"}),B.facets.brands.map(e=>{let a=e.value.toLowerCase().replace(/\s+/g,"-");return(0,s.jsxs)("label",{className:"flex items-center gap-2 font-secondary text-[var(--color-secondary-800)] cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",className:"h-5 w-5 md:h-4 md:w-4 accent-[var(--color-primary-600)] cursor-pointer",checked:z.includes(a),onChange:()=>{(0,N.I)(),z.includes(a)?M(z.filter(e=>e!==a)):M([...z,a])}}),(0,s.jsxs)("div",{className:"flex justify-between w-full items-center",children:[(0,s.jsx)("span",{className:"truncate",children:e.value}),(0,s.jsx)("span",{className:"text-xs font-secondary bg-[var(--color-secondary-200)] text-[var(--color-secondary-800)] px-2 py-0.5 rounded",children:e.count})]})]},e.id)})]})})]})})}),(0,s.jsxs)("section",{className:"w-full relative min-h-[400px]",children:[U&&(0,s.jsx)("div",{className:"h-[60vh] z-10 flex items-center justify-center",children:(0,s.jsx)("div",{className:"size-14 block border-t-2 border-black rounded-full animate-spin"})}),U||0!==ee.length?U?null:(0,s.jsx)(s.Fragment,{children:"grid"===q?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ee.map(e=>{var a,t,n,l;let c="/product/".concat(encodeURIComponent(e.node.slug)),i=(0,o.m_)(null==(t=e.node.media)||null==(a=t[0])?void 0:a.url)||"/no-image-avail-large.png";return(0,s.jsx)(r.A,{id:e.node.id,name:e.node.name,image:i,minPrice:e.node.price_min||0,maxPrice:e.node.price_max||0,href:c,category_id:(null==(n=e.node.category)?void 0:n.id)||"",category:(null==(l=e.node.category)?void 0:l.name)||"",onSale:!1},e.node.id)})}):(0,s.jsx)("div",{className:"space-y-4",children:ee.map(e=>{var a,t,r,n,l;let c="/product/".concat(encodeURIComponent(e.node.slug)),i=(0,o.m_)(null==(t=e.node.media)||null==(a=t[0])?void 0:a.url)||"/no-image-avail-large.png";return(0,s.jsx)(g.A,{id:e.node.id,name:e.node.name,image:i,price:(null==(r=e.node)?void 0:r.price_min)||0,href:c,category_id:(null==(n=e.node.category)?void 0:n.id)||"",category:(null==(l=e.node.category)?void 0:l.name)||"",onSale:!1},e.node.id)})})}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-[var(--color-secondary-800)]",children:"No products found"}),(0,s.jsx)("p",{className:"mt-2 text-[var(--color-secondary-600)]",children:"Try adjusting your filters or search criteria."})]}),et>1&&(0,s.jsx)("div",{className:"mt-16",children:(0,s.jsx)(p(),{pageCount:et,forcePage:Math.max(0,Math.min(et-1,T-1)),onPageChange:e=>{O(e.selected+1),window.scrollTo({top:0,behavior:"smooth"})},marginPagesDisplayed:1,pageRangeDisplayed:2,previousLabel:(0,s.jsxs)("p",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"size-5 text-black rotate-90",children:b.D}),"Prev"]}),nextLabel:(0,s.jsxs)("p",{className:"flex items-center gap-1 !text-[var(--color-secondary-600)] font-semibold",children:["Next",(0,s.jsx)("span",{className:"size-5 -rotate-90",children:b.D})]}),renderOnZeroPageCount:void 0,containerClassName:"flex items-center justify-center gap-2 font-secondary",pageClassName:"list-none",pageLinkClassName:"px-3 py-2 !text-base bg-[var(--color-secondary-200)] text-gray-900 hover:opacity-80",previousClassName:"list-none",previousLinkClassName:"px-3 py-2 !text-base bg-[var(--color-secondary-200)] text-gray-700 hover:opacity-80 flex items-center gap-1",nextClassName:"list-none",nextLinkClassName:"px-3 py-2 !text-base bg-[var(--color-secondary-200)] text-gray-700 hover:opacity-80 flex items-center gap-1",activeClassName:"list-none",activeLinkClassName:"px-3 py-2 !text-base !bg-[var(--color-primary-600)] text-white border border-[var(--color-primary-600)]",disabledClassName:"opacity-50 pointer-events-none",breakLabel:"...",breakLinkClassName:"px-2 !text-base text-gray-500"})})]})]})]})}function S(e){let{initialData:a}=e;return(0,s.jsx)(i.Suspense,{children:(0,s.jsx)(k,{initialData:a})})}},96538:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});var s=t(54568);function r(e){let{content:a,className:t,as:r="h1"}=e;return(0,s.jsx)(r,{style:{color:"var(--color-secondary-75)"},className:"text-2xl md:text-3xl lg:text-5xl uppercase font-primary -tracking-[0.12px] ".concat(t),children:a})}}},e=>{e.O(0,[7261,8745,4398,1773,5772,2417,4367,1732,5297,587,1902,7358],()=>e(e.s=6134)),_N_E=e.O()}]);