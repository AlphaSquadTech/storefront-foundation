(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2959],{8832:(e,a,t)=>{"use strict";t.d(a,{U_:()=>n,WO:()=>i,Yo:()=>s});var r=t(24338);function s(e){var a,t;let s=r.env.NEXT_PUBLIC_SITE_URL.replace(/\/$/,""),n=Array.isArray(e.image)?e.image:e.image?[e.image]:[];return{"@context":"https://schema.org","@type":"Product",name:e.name,description:e.description||"",image:n.map(e=>e.startsWith("http")?e:"".concat(s).concat(e)),sku:e.sku||e.id,category:null==(a=e.category)?void 0:a.name,offers:{"@type":"Offer",price:(null==(t=e.price)?void 0:t.toString())||"0",priceCurrency:e.currency||"USD",availability:e.availability?"https://schema.org/".concat(e.availability):"https://schema.org/InStock",url:"".concat(s,"/product/").concat(e.id)},brand:e.brand?{"@type":"Brand",name:e.brand}:void 0,aggregateRating:e.rating&&e.reviewCount?{"@type":"AggregateRating",ratingValue:e.rating.toString(),reviewCount:e.reviewCount.toString()}:void 0}}function n(e,a){let t=r.env.NEXT_PUBLIC_SITE_URL.replace(/\/$/,"");return{"@context":"https://schema.org","@type":"ItemList",name:a,numberOfItems:e.length,itemListElement:e.map((e,a)=>{var r,s;return{"@type":"ListItem",position:a+1,item:{"@type":"Product",name:e.name,url:"".concat(t,"/product/").concat(e.id),image:Array.isArray(e.image)?e.image[0]:e.image||"",category:null==(r=e.category)?void 0:r.name,offers:{"@type":"Offer",price:(null==(s=e.price)?void 0:s.toString())||"0",priceCurrency:e.currency||"USD"}}}})}}function i(e){let a=r.env.NEXT_PUBLIC_SITE_URL.replace(/\/$/,"");return{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:e.map((e,t)=>({"@type":"ListItem",position:t+1,name:e.name,item:e.url.startsWith("http")?e.url:"".concat(a).concat(e.url)}))}}},24886:(e,a,t)=>{"use strict";t.d(a,{default:()=>k});var r=t(54568),s=t(7620),n=t(62942),i=t(66180),l=t.n(i),o=t(61584),c=t(78136),d=t(71816),p=t(33932),u=t(33288),m=t(39452),g=t(32064),x=t(14041),h=t(51918),y=t(59732),v=t(53706),f=t(21556),b=t(763),j=t(8832),N=t(895),_=t(70737),C=t(24338);let S=(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})});function w(e){let{initialData:a}=e,t=(0,n.useSearchParams)(),i=(0,n.useRouter)(),w=(0,n.usePathname)(),k=(null==t?void 0:t.get("fitment_pairs"))||"",{getSelectedNames:L,isComplete:P}=(0,b.y)(),E=a?{products:a.products.map(e=>{var a,t;return{id:e.id,name:e.name,slug:e.slug,description:e.description||"",category:e.category||{id:"",name:""},productType:e.productType||{id:"",name:"",slug:""},thumbnail:e.thumbnail||{url:"",alt:""},price_min:null!=(a=e.price_min)?a:null,price_max:null!=(t=e.price_max)?t:null,media:e.media||[]}}),facets:{brands:a.facets.brands.map(e=>({id:e.id,value:e.value,count:e.count,media:e.media})),categories:a.facets.categories,price_ranges:a.facets.price_ranges,years:a.facets.years,makes:a.facets.makes,models:a.facets.models},pagination:a.pagination}:null,[I,A]=(0,s.useState)((null==a?void 0:a.pagination.per_page)||18),[R,U]=(0,s.useState)([]),[T,O]=(0,s.useState)([]),[B,M]=(0,s.useState)((null==a?void 0:a.pagination.page)||1),[z,D]=(0,s.useState)(!a),[H,K]=(0,s.useState)(E),[W,X]=(0,s.useState)("grid"),[F,G]=(0,s.useState)("name_asc"),[$,J]=(0,s.useState)(!!a),[V,Y]=(0,s.useState)(!!a),Z=(0,s.useRef)(null),q=(0,s.useMemo)(()=>{let e=a=>{let t=[];return a.forEach(a=>{t.push([a.slug,a.id]),a.children&&t.push(...e(a.children))}),t};return new Map((null==H?void 0:H.facets.categories)?e(H.facets.categories):[])},[null==H?void 0:H.facets.categories]),Q=(0,s.useMemo)(()=>new Map((null==H?void 0:H.facets.brands.map(e=>[e.value.toLowerCase().replace(/\s+/g,"-"),e.id]))||[]),[null==H?void 0:H.facets.brands]),ee=(0,s.useCallback)((e,a,t,r)=>{let s=new URLSearchParams;k&&s.set("fitment_pairs",k),e.length>0&&e.forEach(e=>{s.append("category",e)}),a.length>0&&a.forEach(e=>{s.append("brand",e)}),"name_asc"!==t&&s.set("sort",t),r>1&&s.set("page",r.toString());let n=s.toString(),l=n?"".concat(w,"?").concat(n):w;i.replace(l,{scroll:!1})},[w,i,k]),ea=(0,s.useCallback)(()=>{let e=t.getAll("category"),a=t.getAll("brand"),r=t.get("sort"),s=t.get("page");return{categories:e,brands:a,sortKey:r||"name_asc",page:s?parseInt(s,10):1}},[t]);(0,s.useEffect)(()=>{if(!$){let e=ea();U(e.categories),O(e.brands),G(e.sortKey),M(e.page),J(!0)}},[$,ea]),(0,s.useEffect)(()=>{$&&ee(R,T,F,B)},[$,R,T,F,B,ee]),(0,s.useEffect)(()=>{if(V)return void Y(!1);(async()=>{D(!0);try{let e=new URLSearchParams({page:String(B),per_page:String(I)});k&&e.set("fitment_pairs",k),R.length>0&&q.size>0&&R.forEach(a=>{e.append("category_slug",a)}),T.length>0&&Q.size>0&&T.forEach(a=>{e.append("brand_slug",a)}),F&&("name_asc"===F?console.log("Get all products"):e.set("sort_by",F));let a=C.env.NEXT_PUBLIC_PARTSLOGIC_URL||"https://pl-aeroexhaust.wsm-dev.com",t=await fetch("".concat(a,"/api/search/products?").concat(e.toString()),{headers:{accept:"application/json"}});if(!t.ok)throw Error("Failed to fetch products");let r=await t.json();K(r)}catch(e){console.error("Error fetching products:",e)}finally{D(!1)}})()},[k,B,I,R,T,F,V]);let et=(null==H?void 0:H.products.map(e=>{var a;return{node:{id:e.id,name:e.name,slug:e.slug,media:null==(a=e.media)?void 0:a.map(e=>({id:String(e.id),url:e.url,alt:e.alt||null})),category:e.category||null,price_min:e.price_min,price_max:e.price_max,pricing:{onSale:null,priceRange:{start:e.price_min||null,stop:e.price_max||null}}}}}))||[],er=(null==H?void 0:H.pagination.total)||0,es=(null==H?void 0:H.pagination.total_pages)||1,en=k?"Search Results":"All Products",ei=e=>{i.push("/search?fitment_pairs=".concat(e))},el=(0,s.useMemo)(()=>{let e=function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[];return a.forEach(a=>{r.push({id:a.slug,name:"".concat("  ".repeat(t)).concat(a.value),slug:a.slug,products:{totalCount:a.count}}),a.children&&r.push(...e(a.children,t+1))}),r};return(null==H?void 0:H.facets.categories)?e(H.facets.categories):[]},[null==H?void 0:H.facets.categories]),eo=H&&H.products.length>0?(0,j.U_)(H.products.map(e=>{var a,t;return{id:e.id,name:e.name,price:e.price_min||0,currency:"USD",image:null==(t=e.media)||null==(a=t[0])?void 0:a.url,category:e.category?{id:e.category.id,name:e.category.name}:void 0}}),en):null;return(0,r.jsxs)("div",{ref:Z,className:"container mx-auto min-h-[100dvh] py-12 px-4 md:px-6 md:py-16 lg:py-24 lg:px-0 relative",children:[eo&&(0,r.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(eo)}}),(0,r.jsx)(_.A,{currentPage:B,totalPages:es,basePath:"/search"}),(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsx)(c.A,{items:[{text:"HOME",link:"/"},{text:"SHOP",link:"/products/all"},{text:"SEARCH RESULTS"}]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,r.jsx)("h1",{className:"font-normal uppercase text-[var(--color-secondary-800)] text-2xl md:text-3xl lg:text-5xl font-primary",children:en}),P&&(0,r.jsxs)("p",{className:"font-normal text-[var(--color-secondary-600)] text-lg md:text-xl lg:text-3xl font-primary",children:["• ",L().join(" • ")]})]}),(0,r.jsxs)("p",{className:"text-[var(--color-secondary-600)] text-sm md:text-base",children:[er," product",1===er?"":"s"," found"]})]}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-3 lg:gap-1 w-full justify-end",children:[(0,r.jsx)(p.m,{sortOptions:[{key:"price_min:asc",label:"Price: Low to High"},{key:"price_max:desc",label:"Price: High to Low"}],sortKey:F,setSortKey:G}),(0,r.jsxs)("div",{className:"flex items-center justify-end w-full md:w-auto gap-1",children:[(0,r.jsx)(y.A,{categories:el,productTypes:((null==H?void 0:H.facets.brands)||[]).map(e=>{let a=e.value.toLowerCase().replace(/\s+/g,"-");return{id:a,name:e.value,slug:a,products:{totalCount:e.count}}}),selectedCategoryIds:R,selectedProductTypeIds:T,onCategoryChange:U,onProductTypeChange:O,filtersLoading:z}),(0,r.jsxs)("div",{className:"ring-1 ring-[var(--color-secondary-100)] items-center transition-all ease-in-out duration-300 p-1 bg-[var(--color-secondary-100)]",children:[(0,r.jsx)("button",{type:"button",onClick:()=>X("list"),"aria-pressed":"list"===W,"aria-label":"List view",className:"p-2.5 transition-all ease-in-out duration-300 cursor-pointer ".concat("list"===W?"bg-white":"bg-transparent"),children:(0,r.jsx)("span",{className:"size-5 ".concat("list"===W?"text-[var(--color-primary-600)]":"text-[var(--color-secondary-600)]"),children:m.k})}),(0,r.jsx)("button",{type:"button",onClick:()=>X("grid"),"aria-pressed":"grid"===W,"aria-label":"Grid view",className:"p-2.5 transition-all ease-in-out duration-300 cursor-pointer ".concat("grid"===W?"bg-white":"bg-transparent"),children:(0,r.jsx)("span",{className:"size-5 ".concat("grid"===W?"text-[var(--color-primary-600)]":"text-[var(--color-secondary-600)]"),children:g.a})})]}),(0,r.jsx)(o.A,{value:I,onChange:A})]})]})]}),(0,r.jsx)("div",{className:"lg:hidden mt-6",children:(0,r.jsx)(f.a,{onSearch:ei,AddClearButton:!0,className:"!border !border-[var(--color-secondary-200)] !p-4 [&>h2]:!text-lg"})}),(0,r.jsxs)("div",{className:"mt-10 flex gap-8",children:[(0,r.jsx)("aside",{className:"hidden lg:block w-80 flex-shrink-0",children:(0,r.jsxs)("div",{className:"sticky top-24 space-y-6",children:[(0,r.jsx)(f.a,{onSearch:ei,AddClearButton:!0,className:" !border !border-[var(--color-secondary-200)] !p-4 [&>h2]:!text-lg"}),H&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{categories:H.facets.categories,selectedCategories:R,onCategoriesChange:U}),(0,r.jsx)(u.e,{title:"Brands",defaultOpen:!0,children:(0,r.jsxs)("div",{className:"space-y-3 px-1 overflow-y-auto max-h-80",children:[T.length>0&&(0,r.jsx)("button",{type:"button",onClick:()=>O([]),className:"text-sm text-[var(--color-primary-600)] hover:text-[var(--color-primary-700)] font-secondary",children:"Clear all"}),H.facets.brands.map(e=>{let a=e.value.toLowerCase().replace(/\s+/g,"-");return(0,r.jsxs)("label",{className:"flex items-center gap-2 font-secondary text-[var(--color-secondary-800)] cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",className:"h-5 w-5 md:h-4 md:w-4 accent-[var(--color-primary-600)] cursor-pointer",checked:T.includes(a),onChange:()=>{(0,N.I)(),T.includes(a)?O(T.filter(e=>e!==a)):O([...T,a])}}),(0,r.jsxs)("div",{className:"flex justify-between w-full items-center",children:[(0,r.jsx)("span",{className:"truncate",children:e.value}),(0,r.jsx)("span",{className:"text-xs font-secondary bg-[var(--color-secondary-200)] text-[var(--color-secondary-800)] px-2 py-0.5 rounded",children:e.count})]})]},e.id)})]})})]})]})}),(0,r.jsxs)("section",{className:"w-full relative min-h-[400px]",children:[z&&(0,r.jsx)("div",{className:"h-[60vh] z-10 flex items-center justify-center",children:(0,r.jsx)("div",{className:"size-14 block border-t-2 border-black rounded-full animate-spin"})}),z||0!==et.length?z?null:(0,r.jsx)(r.Fragment,{children:"grid"===W?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:et.map(e=>{var a,t,s,n;let i="/product/".concat(encodeURIComponent(e.node.slug)),l=(0,v.m_)(null==(t=e.node.media)||null==(a=t[0])?void 0:a.url)||"/no-image-avail-large.png";return(0,r.jsx)(h.A,{id:e.node.id,name:e.node.name,image:l,minPrice:e.node.price_min||0,maxPrice:e.node.price_max||0,href:i,category_id:(null==(s=e.node.category)?void 0:s.id)||"",category:(null==(n=e.node.category)?void 0:n.name)||"",onSale:!1},e.node.id)})}):(0,r.jsx)("div",{className:"space-y-4",children:et.map(e=>{var a,t,s,n,i;let l="/product/".concat(encodeURIComponent(e.node.slug)),o=(0,v.m_)(null==(t=e.node.media)||null==(a=t[0])?void 0:a.url)||"/no-image-avail-large.png";return(0,r.jsx)(x.A,{id:e.node.id,name:e.node.name,image:o,price:(null==(s=e.node)?void 0:s.price_min)||0,href:l,category_id:(null==(n=e.node.category)?void 0:n.id)||"",category:(null==(i=e.node.category)?void 0:i.name)||"",onSale:!1},e.node.id)})})}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-[var(--color-secondary-800)]",children:"No products found"}),(0,r.jsx)("p",{className:"mt-2 text-[var(--color-secondary-600)]",children:"Try adjusting your filters or search criteria."})]}),es>1&&(0,r.jsx)("div",{className:"mt-16",children:(0,r.jsx)(l(),{pageCount:es,forcePage:Math.max(0,Math.min(es-1,B-1)),onPageChange:e=>{M(e.selected+1),window.scrollTo({top:0,behavior:"smooth"})},marginPagesDisplayed:1,pageRangeDisplayed:2,previousLabel:(0,r.jsxs)("p",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"size-5 text-black rotate-90",children:S}),"Prev"]}),nextLabel:(0,r.jsxs)("p",{className:"flex items-center gap-1 !text-[var(--color-secondary-600)] font-semibold",children:["Next",(0,r.jsx)("span",{className:"size-5 -rotate-90",children:S})]}),renderOnZeroPageCount:void 0,containerClassName:"flex items-center justify-center gap-2 font-secondary",pageClassName:"list-none",pageLinkClassName:"px-3 py-2 !text-base bg-[var(--color-secondary-200)] text-gray-900 hover:opacity-80",previousClassName:"list-none",previousLinkClassName:"px-3 py-2 !text-base bg-[var(--color-secondary-200)] text-gray-700 hover:opacity-80 flex items-center gap-1",nextClassName:"list-none",nextLinkClassName:"px-3 py-2 !text-base bg-[var(--color-secondary-200)] text-gray-700 hover:opacity-80 flex items-center gap-1",activeClassName:"list-none",activeLinkClassName:"px-3 py-2 !text-base !bg-[var(--color-primary-600)] text-white border border-[var(--color-primary-600)]",disabledClassName:"opacity-50 pointer-events-none",breakLabel:"...",breakLinkClassName:"px-2 !text-base text-gray-500"})})]})]})]})}function k(e){let{initialData:a}=e;return(0,r.jsx)(s.Suspense,{children:(0,r.jsx)(w,{initialData:a})})}},28758:(e,a,t)=>{Promise.resolve().then(t.bind(t,24886))}},e=>{e.O(0,[7261,8745,4398,1773,5772,2417,4367,1732,5297,587,1902,7358],()=>e(e.s=28758)),_N_E=e.O()}]);